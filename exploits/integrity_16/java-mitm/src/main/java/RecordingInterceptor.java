import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class RecordingInterceptor extends LoggingInterceptor {

    private final List<byte[]> serverToClientBytes = Collections.synchronizedList(new ArrayList<>());
    private final List<byte[]> clientToServerBytes = Collections.synchronizedList(new ArrayList<>());

    @Override public InterceptionResult serverToClient(byte[] bytes) {
        serverToClientBytes.add(bytes.clone());
        return super.serverToClient(bytes);
    }

    @Override public InterceptionResult clientToServer(byte[] bytes) {
        clientToServerBytes.add(bytes.clone());
        return super.clientToServer(bytes);
    }

    public List<byte[]> getServerToClientBytes() {
        return Collections.unmodifiableList(serverToClientBytes);
    }

    public List<byte[]> getClientToServerBytes() {
        return Collections.unmodifiableList(clientToServerBytes);
    }
}
